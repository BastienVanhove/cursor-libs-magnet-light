var c=Object.create,S=Object.defineProperty;var a=Object.getOwnPropertyDescriptor;var i=Object.getOwnPropertyNames;var d=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var F=e=>S(e,"__esModule",{value:!0});var y=(e,t)=>{for(var s in t)S(e,s,{get:t[s],enumerable:!0})},p=(e,t,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of i(t))!N.call(e,o)&&o!=="default"&&S(e,o,{get:()=>t[o],enumerable:!(s=a(t,o))||s.enumerable});return e},l=e=>p(F(S(e!=null?c(d(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);F(exports);y(exports,{FUTURE_KEY:()=>u,NOT_HISTORY_ATOM_ERROR:()=>_,PAST_KEY:()=>r,PRESENT_KEY:()=>n,historyAtom:()=>V,useHistoryAtom:()=>f});var U=l(require("../atoms"));const r={key:"history"},n={key:"present"},u={key:"future"},_="`useHistoryAtom` can only be used with atoms from `historyAtom`",V=(0,U.createAtom)({beforeValueSet:(e,t,s)=>{s&&(e.UNSAFE_storage.set(r,[]),e.UNSAFE_storage.set(u,[]));const o=e.UNSAFE_storage.get(r),A=e.UNSAFE_storage.get(n),g=[...o,A];e.UNSAFE_storage.set(r,g),e.UNSAFE_storage.set(n,t)},onCreate:e=>(e.undo=()=>{const t=e.UNSAFE_storage.get(r),s=t[t.length-1],o=t.slice(0,t.length-1),A=e.UNSAFE_storage.get(n),g=e.UNSAFE_storage.get(u),E=[A,...g];e.UNSAFE_storage.set(r,o),e.UNSAFE_storage.set(n,s),e.UNSAFE_storage.set(u,E),e.UNSAFE_directSet(s),e.UNSAFE_notify()},e.redo=()=>{const t=e.UNSAFE_storage.get(u),s=t[0],o=t.slice(1),A=e.UNSAFE_storage.get(n),E=[...e.UNSAFE_storage.get(r),A];e.UNSAFE_storage.set(u,o),e.UNSAFE_storage.set(n,s),e.UNSAFE_storage.set(r,E),e.UNSAFE_directSet(s),e.UNSAFE_notify()},e),onGet:e=>e.UNSAFE_storage.get(n)}),f=e=>{if((s=>"undo"in s&&"redo"in s)(e))return{undo:e.undo,redo:e.redo};throw new Error(_)};
